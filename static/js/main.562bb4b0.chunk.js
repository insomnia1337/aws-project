(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){e.exports=a(506)},127:function(e,t,a){},129:function(e,t,a){},505:function(e,t,a){},506:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),c=(a(127),a(27)),l=a.n(c),s=a(36),u=a(54),m=a(32),p=a(67),d=a(55),g=a(68),f=(a(129),a(507)),h=a(540),v=a(541),b=a(548),w=a(22),E=Object(f.a)(function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}});function y(e){var t=E();return r.a.createElement("div",{className:t.root},r.a.createElement(h.a,{position:"static"},r.a.createElement(v.a,null,e.isAuthenticated?r.a.createElement(b.a,{component:w.b,to:"/register",variant:"contained",color:"secondary",onClick:e.handleLogout},"Logout"):r.a.createElement(n.Fragment,null,r.a.createElement(b.a,{variant:"contained",color:"secondary",component:w.b,to:"/"},"Login"),r.a.createElement(b.a,{className:"register-button",component:w.b,to:"/register",variant:"contained",color:"secondary"},"Register")))))}var j=a(114),O=a(34),k=function(e){var t=e.component,a=e.props,n=Object(j.a)(e,["component","props"]);return r.a.createElement(O.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))};function x(){return r.a.createElement("div",null,"404 not Found")}var C=a(29),P=a(544),I=a(543),S=a(547),A=a(545),U=a(65),N=a.n(U),W=a(509),D=a(542),T=a(19),F="eu-west-1:9b7fdb04-13e1-4afc-b106-28e1f8341d9b",B="eu-central-1",L="185868",q={UserPoolId:"eu-west-1_BuFvMskGo",ClientId:"60e0k1u4i8cvf943j9rp80532c"},H=a(20),R=a.n(H),V=function(e){function t(e,a,n){var r;return Object(u.a)(this,t),(r=Object(p.a)(this,Object(d.a)(t).call(this))).cognitoUser=n,r.userPool=e,r.credentials=a,r}return Object(g.a)(t,e),Object(m.a)(t,[{key:"signInUser",value:function(e,t){var a=this;return new Promise(function(n,r){var o=new T.a({Username:e,Password:t});new T.b({Username:e,Pool:a.userPool}).authenticateUser(o,{onSuccess:n,onFailure:r})})}},{key:"signUpUser",value:function(e){var t=this;return new Promise(function(a,n){t.userPool.signUp(e.username,e.password,[new T.c({Name:"email",Value:e.email}),new T.c({Name:"name",Value:e.name})],null,function(e,t){e?console.log(e):(a(),console.log("Uda\u0142o si\u0119. Username: ".concat(t.user.getUsername())))})})}},{key:"confirm",value:function(e){var t=this;return new Promise(function(a,n){new T.b({Username:e.username,Pool:t.userPool}).confirmRegistration(e.code,!0,function(e,t){if(e)return console.log(e),alert("Wpisany KOD jest nie prawid\u0142owy. Spr\xf3buj ponownie"),void console.log("Wpisany KOD jest nie prawid\u0142owy. Spr\xf3buj ponownie");a()})})}},{key:"getIdentityId",value:function(){return this.credentials.identityId}},{key:"logOut",value:function(){var e=this.userPool.getCurrentUser();null!=e&&e.signOut()}}]),t}(r.a.Component),z=Object(f.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),G=new R.a.CognitoIdentityCredentials({IdentityPoolId:F}),K=new V(new T.d(q),G);function J(e){var t=z(),a=Object(n.useState)(""),o=Object(C.a)(a,2),i=o[0],c=o[1],u=Object(n.useState)(""),m=Object(C.a)(u,2),p=m[0],d=m[1],g=function(){var t=Object(s.a)(l.a.mark(function t(a){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,K.signInUser(i,p);case 4:e.userHasAuthenticated(!0),e.history.push("/home"),console.log(e),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e.userHasAuthenticated(!1),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(D.a,{component:"main",maxWidth:"xs"},r.a.createElement(I.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(P.a,{className:t.avatar},r.a.createElement(N.a,null)),r.a.createElement(W.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"Login",name:"login",autoComplete:"login",autoFocus:!0,value:i,onChange:function(e){return c(e.target.value)}}),r.a.createElement(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:p,onChange:function(e){return d(e.target.value)}}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:g},"Sign In"),r.a.createElement(A.a,{container:!0},r.a.createElement(A.a,{item:!0},r.a.createElement(w.b,{style:{textDecoration:"none"},to:"/register",variant:"body2"},"Don't have an account? Sign Up"))))))}var _=new T.d(q),M=new R.a.CognitoIdentityCredentials({IdentityPoolId:F});R.a.config.update({region:"eu-west-1",credentials:M});var $=new V(_,M),Q=Object(f.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}});function X(e){var t=Q(),a=Object(n.useState)(""),o=Object(C.a)(a,2),i=o[0],c=o[1],u=Object(n.useState)(""),m=Object(C.a)(u,2),p=m[0],d=m[1],g=Object(n.useState)(""),f=Object(C.a)(g,2),h=f[0],v=f[1],E=Object(n.useState)(""),y=Object(C.a)(E,2),j=y[0],O=y[1],k=Object(n.useState)(""),x=Object(C.a)(k,2),U=x[0],T=x[1],F=Object(n.useState)(""),B=Object(C.a)(F,2),L=B[0],q=B[1],H=function(e){T(e.target.value)},R=function(){var e=Object(s.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i.length>0&&h.length>0&&h===j){e.next=3;break}return e.abrupt("return",alert("Wpisane dane s\u0105 niepoprawne."));case 3:return e.prev=3,e.next=6,$.signUpUser({username:i,password:h,email:p});case 6:q("test"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[3,9]])}));return function(t){return e.apply(this,arguments)}}(),V=function(){var t=Object(s.a)(l.a.mark(function t(a){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),U.length>0){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,$.confirm({username:i,code:U});case 6:e.history.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0.message);case 12:case"end":return t.stop()}},t,null,[[3,9]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"signup"},L?r.a.createElement(D.a,{style:{marginTop:"64px"},component:"main",maxWidth:"xs"},r.a.createElement("form",{onSubmit:V},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(S.a,{autoComplete:"fname",name:"Type your code",variant:"outlined",required:!0,fullWidth:!0,label:"Type your code",autoFocus:!0,value:U,onChange:H})),r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Confirm code")),r.a.createElement("div",null,"Please check your email for the code."))):r.a.createElement(D.a,{component:"main",maxWidth:"xs"},r.a.createElement(I.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(P.a,{className:t.avatar},r.a.createElement(N.a,null)),r.a.createElement(W.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,onSubmit:R},r.a.createElement(A.a,{container:!0,spacing:2},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(S.a,{autoComplete:"fname",name:"login",variant:"outlined",required:!0,fullWidth:!0,id:"login",label:"Login",autoFocus:!0,value:i,onChange:function(e){return c(e.target.value)}})),r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(S.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",value:p,onChange:function(e){return d(e.target.value)}})),r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(S.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:h,onChange:function(e){return v(e.target.value)}})),r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(S.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password2",label:"Repeat password",type:"password",id:"password2",autoComplete:"current-password",value:j,onChange:function(e){return O(e.target.value)}}))),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign Up"),r.a.createElement(A.a,{container:!0,justify:"flex-end"},r.a.createElement(A.a,{item:!0},r.a.createElement(w.b,{style:{textDecoration:"none"},to:"/login",variant:"body2"},"Already have an account? Sign in")))))))}var Y=a(116),Z=(a(505),new R.a.CognitoIdentityCredentials({IdentityPoolId:F}));new V(new T.d(q),Z);function ee(e){var t=Object(Y.a)({accept:"image/jpeg, image/png"}),n=t.acceptedFiles,o=t.rejectedFiles,i=t.getRootProps,c=t.getInputProps,l=new R.a.S3({apiVersion:"2006-03-01",region:B,params:{Bucket:L}}),s=n.map(function(e){return r.a.createElement("li",{key:e.path},e.path," - ",e.size," bytes")}),u=o.map(function(e){return r.a.createElement("li",{key:e.path},e.path," - ",e.size," bytes")}),m=a(105),p=function(e){e.preventDefault();for(var t=Date.now(),a="uek-krakow/".concat(t,"/"),n=[],r=new FormData,o=function(e){var t=s[e];r.append("file",t),n.push(new Promise(function(e,n){l.putObject({Key:"".concat(a).concat(t.key),ContentType:"image/jpeg",Body:r},function(t,a){t?(console.log(t),n(t)):e(a)}),e("ok")})),Promise.all(n).then(function(e){console.log(e),console.log("Pliki wyslane");var t={order_id:m(),email:"test@wp.pl",photos:s.map(function(e){return"".concat(a).concat(e.name)})};console.log(t),fetch("animationApiGatewayUrl",{method:"post",body:JSON.stringify(t),mode:"no-cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.text()}).then(function(e){console.log("Pliki przeslane"),console.log(e)})})},i=0;i<s.length;i++)o(i)};return r.a.createElement("div",null,e.isAuthenticated?r.a.createElement("div",null,r.a.createElement("section",{className:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,"Animation creator"),r.a.createElement("p",null,"Create pretty nice animations\ud83c\udf54\ud83c\udf54\ud83c\udf54")),r.a.createElement("div",i({className:"dropzone"}),r.a.createElement("input",c()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files and send to create animation"),r.a.createElement("em",null,"(Only *.jpeg and *.png images will be accepted)")),r.a.createElement("aside",null,r.a.createElement("h4",null,"Accepted files"),r.a.createElement("ul",null,s),r.a.createElement("h4",null,"Rejected files"),r.a.createElement("ul",null,u))),r.a.createElement("button",{onClick:p},"Send file")):r.a.createElement(O.a,{to:"/"}))}var te=function(e){var t=e.childProps;return r.a.createElement(O.d,null,r.a.createElement(k,{path:"/home",exact:!0,component:ee,props:t}),r.a.createElement(k,{path:"/",exact:!0,component:J,props:t}),r.a.createElement(k,{path:"/register",exact:!0,component:X,props:t}),r.a.createElement(O.b,{component:x}))},ae=a(546);function ne(){return r.a.createElement(W.a,{variant:"body2",color:"textSecondary"},"Check project on my ",r.a.createElement(ae.a,{color:"inherit",href:"https://github.com/insomnia1337/aws-project"},"Github"))}var re=Object(f.a)(function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(2),marginTop:"400px",backgroundColor:"white"}}});function oe(){var e=re();return r.a.createElement("footer",{className:e.footer},r.a.createElement(D.a,{maxWidth:"sm"},r.a.createElement(W.a,{variant:"body1"},"2019 Krak\xf3w"),r.a.createElement(ne,null)))}var ie=new T.d(q),ce=new R.a.CognitoIdentityCredentials({IdentityPoolId:F});R.a.config.update({region:"eu-west-1",credentials:ce});var le=new V(ie,ce),se=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).userHasAuthenticated=function(e){a.setState({isAuthenticated:e})},a.handleLogout=function(){var e=Object(s.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,le.logOut();case 3:a.userHasAuthenticated(!1);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={isAuthenticated:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated};return r.a.createElement("div",{className:"App"},r.a.createElement(w.a,null,r.a.createElement(y,{handleLogout:this.handleLogout,isAuthenticated:this.state.isAuthenticated}),r.a.createElement(te,{childProps:e})),r.a.createElement(oe,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=new T.d(q),me=new R.a.CognitoIdentityCredentials({IdentityPoolId:F});R.a.config.update({region:"eu-west-1",credentials:me});new R.a.S3({apiVersion:"2006-03-01",region:B,params:{Bucket:L}}),new V(ue,me);i.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t){}},[[122,1,2]]]);
//# sourceMappingURL=main.562bb4b0.chunk.js.map